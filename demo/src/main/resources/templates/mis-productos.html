<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Productos - Cultivus</title>
    <link rel="stylesheet" th:href="@{/mis-productos.css}">

</head>

<body>
    <header th:replace="fragments/header-vendedor :: siteHeader"></header>

    <div class="container">
        <div class="header-section">
            <h1><i class="fa-solid fa-box"></i> Mis Productos</h1>
            <a th:href="@{/vendedor/productos/nuevo}" class="btn-add">
                <i class="fa-solid fa-plus"></i> Agregar Producto
            </a>
        </div>

        <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

        <div th:if="${productos == null || productos.isEmpty()}" class="empty-state">
            <i class="fa-solid fa-inbox"></i>
            <h3>No tienes productos aún</h3>
            <p>Comienza agregando tu primer producto</p>
            <a th:href="@{/vendedor/productos/nuevo}" class="btn-add" style="display: inline-block; margin-top: 20px;">
                <i class="fa-solid fa-plus"></i> Agregar Producto
            </a>
        </div>

        <div th:if="${productos != null && !productos.isEmpty()}" class="productos-grid">
            <div th:each="producto : ${productos}" class="producto-card">
                <img th:src="${producto.imagenUrl}" th:alt="${producto.nombre}" class="producto-imagen"
                    onerror="this.src='/images/placeholder.jpg'">
                <div class="producto-info">
                    <div class="producto-nombre" th:text="${producto.nombre}"></div>
                    <div class="producto-descripcion" th:text="${producto.descripcion}"></div>
                    <div class="producto-precio">
                        $<span th:text="${#numbers.formatDecimal(producto.precio, 0, 'COMMA', 0, 'POINT')}">0</span>
                    </div>
                    <div class="producto-stock">
                        <i class="fa-solid fa-box"></i> Stock: <span th:text="${producto.stock}">0</span>
                    </div>
                    <div class="producto-stock">
                        <i class="fa-solid fa-tag"></i> <span th:text="${producto.categoria.nombre}"></span>
                    </div>
                    <div class="producto-acciones">
                        <a th:href="@{/vendedor/productos/editar/{id}(id=${producto.id})}" class="btn-editar">
                            <i class="fa-solid fa-pen"></i> Editar
                        </a>
                        <form th:action="@{/vendedor/productos/eliminar/{id}(id=${producto.id})}" method="post"
                            style="flex: 1;" onsubmit="return confirm('¿Está seguro de eliminar este producto?');">
                            <button type="submit" class="btn-eliminar">
                                <i class="fa-solid fa-trash"></i> Eliminar
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>